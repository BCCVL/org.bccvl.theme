<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:i18n="http://xml.zope.org/namespaces/i18n"
      i18n:domain="plone.z3cform"
      tal:omit-tag="">

  <head></head>

  <body>

    <metal:block metal:define-macro="algo_parameters">
      <fieldset id="fieldset-parameters"
                tal:define="param_groups view/param_groups|nothing"
                tal:condition="param_groups">
        <div class="accordion-group" data-function="bioclim"
             tal:repeat="group param_groups"
             tal:attributes="data-function group/toolkit">
          <div class="accordion-heading">
            <a class="accordion-toggle collapsed"
               data-toggle="collapse" data-parent="#algoConfig"
               href="#accordion_body_bioclim"
               tal:attributes="href string:#accordion_body_${group/toolkit}"
               tal:content="group/label">Configuration bioclim</a>
          </div>

          <div class="accordion-body collapse"
               id="accordion_body_bioclim"
               tal:attributes="id string:accordion_body_${group/toolkit}">
            <div class="accordion-inner bccvl-algo-config">
              <span class="formHelp"
                    tal:content="group/description">No configuration options</span>
              <fieldset class="form-horizontal">
                 <div class="algo-params">
                 <tal:block define="view nocall:group">
                   <metal:block use-macro="context/@@ploneform-macros/widget_rendering" />
                 </tal:block>
                 </div>
              </fieldset>
            </div>
          </div>
        </div>
      </fieldset>
    </metal:block>

    <metal:block define-macro="experiment_state">
        <div id="experiment_state" class="row-fluid bccvl-status-block"
             tal:define="state view/job_state;
                         klassstate python: {
                             'Queued': 'bccvl-status-running hidden',
                             'Running': 'bccvl-status-running hidden',
                             'Completed': 'bccvl-status-complete',
                            'Failed': 'bccvl-status-error'}.get(state);
                         klass string:row-fluid bccvl-status-block ${klassstate};"
             tal:attributes="class klass">

            <div class="span12 bccvl-expstatus alert alert-block"
                 tal:attributes="data-status state"
                 tal:condition="python: state in ('Queued', 'New')">
              <p>This experiment is <strong class="alert-queued-text">queued</strong>.</p>
            </div>
            <div class="span12 bccvl-expstatus alert alert-block"
                 tal:attributes="data-status state"
                 tal:condition="python: state in ('Running',)">
              <p>This experiment is <strong class="">running</strong>.</p>
            </div>
            <div class="span12 bccvl-expstatus alert alert-success"
                 tal:attributes="data-status state"
                 tal:condition="python: state in ('Completed',)">
              <p>This experiment is <strong>complete</strong>. The
              results are available below</p>
            </div>
            <div class="span12 bccvl-expstatus alert alert-block alert-error"
                 tal:attributes="data-status state"
                  tal:condition="python: state in ('Failed',)">
              <p class="lead">This experiment stopped with an <strong>error</strong>.</p>
            </div>
        </div>
    </metal:block>

  </body>
</html>
