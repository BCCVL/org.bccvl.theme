<rules
    xmlns="http://namespaces.plone.org/diazo"
    xmlns:css="http://namespaces.plone.org/diazo/css"
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

    <!-- DATASET UPLOAD ============================================ -->
    <rules if-path="datasets_upload_view/">

        <theme href="html/dataset-upload.html" />

        <!-- Tabs -->
        <before css:theme-children="section.bccvl-datasetupload > div.row-fluid" css:content="ul.nav" />

    <!-- Species form -->
        <!-- Form field attributes -->
        <copy attributes="name action method enctype" css:theme="form#addspecies" css:content="form#addspecies" />

        <!-- Submit button -->
        <copy attributes="name value type" css:theme="form#addspecies button[name='addspecies.buttons.save']" css:content="#addspecies-buttons-save" />

        <!-- File field -->
        <copy attributes="name value" css:theme="form#addspecies [name='addspecies.widgets.file']" css:content="#addspecies-widgets-file-input" />

        <!-- Title field-->
        <copy attributes="name value" css:theme="form#addspecies [name='addspecies.widgets.title']" css:content="#addspecies-widgets-title" />

        <!-- Description field-->
        <copy attributes="name value" css:theme="form#addspecies [name='addspecies.widgets.description']" css:content="#addspecies-widgets-description" />
        <replace theme-children="//textarea[@name='addspecies.widgets.description']" content="//textarea[@id='addspecies-widgets-description']/text()" />

        <!-- Dataset Genre field -->
        <replace css:theme-children="form#addspecies [name='addspecies.widgets.datagenre:list']" css:content="#addspecies-widgets-datagenre option" />
        <copy attributes="name" css:theme="form#addspecies [name='addspecies.widgets.datagenre:list']" css:content="#addspecies-widgets-datagenre" />

        <!-- Species Layer field -->
        <replace css:theme-children="form#addspecies [name='addspecies.widgets.specieslayer:list']" css:content="#addspecies-widgets-specieslayer option" />
        <copy attributes="name" css:theme="form#addspecies [name='addspecies.widgets.specieslayer:list']" css:content="#addspecies-widgets-specieslayer" />

        <!-- Scientific name field -->
        <copy attributes="name value" css:theme="form#addspecies [name='addspecies.widgets.scientificName']" css:content="#addspecies-widgets-scientificName" />

        <!-- Taxon ID field -->
        <copy attributes="name value" css:theme="form#addspecies [name='addspecies.widgets.taxonID']" css:content="#addspecies-widgets-taxonID" />        

        <!-- Common name field -->
        <copy attributes="name value" css:theme="form#addspecies [name='addspecies.widgets.vernacularName']" css:content="#addspecies-widgets-vernacularName" />        




        <!--
            don't theme the page unless the expected file input on it. This is required
            because the plone form posts back to the same URL, and we don't want to mess
            that up.
        -->
<!--         <notheme css:if-not-content="#form-widgets-file-input" />
 -->


    </rules>
</rules>
