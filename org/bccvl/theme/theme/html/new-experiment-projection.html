<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8"/>
    <title>BCCVL New Climate Change Experiment</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>

    <link href="lib/bootstrap/css/bootstrap.css" rel="stylesheet"/>
    <link href="lib/bootstrap/css/bootstrap-responsive.css" rel="stylesheet"/>
    <link href="css/general.css" rel="stylesheet"/>
    <!--[if lt IE 9]>
        <script src="lib/html5shiv/html5shiv.js"></script>
    <![endif]-->

    <!-- include portal_url to simplify path referencing -->
    <script src="../plone_javascript_variables.js"></script>
    <!-- this slightly less neat way of using require.js means we can use a common config across all pages -->
    <script src="lib/require/require.js" type="text/javascript"></script>

    <script id="js-config" type="text/javascript">
      // this block needs to be replaced when served via plone
      window.bccvl || (window.bccvl = {});
      window.bccvl.config || (window.bccvl.config = {});
      window.bccvl.config.data_mover = {
          baseUrl: 'https://demo.bccvl.org.au/dv',
      };
      window.bccvl.config.visualiser = {
          baseUrl: '/_visualiser/',
      };

      local = window.location.protocol == 'file:';

    </script>

    <script id="bccvl-lookups" type="text/javascript"></script>

    <script type="text/javascript">
      // require is a bit annoying to kick off when it's running in a plone/diazo page.
      // Plone/diazo adds ++theme++theme.name to the start of theme file URLs.  We can
      // set that as a prefix in the requirejs config, but to initially get to that
      // config file, it needs to have the prefix added there too.
      if (local) {
          require(['js/common.js'], function (common) { require(['js/new-experiment-projection']); } );
      } else {
          require([portal_url + '/++resource++bccvl/js/common.js'], function (common) { require(['js/new-experiment-projection']); } );
      }
    </script>

    <script id="google-analytics"></script>

  </head>

  <body>
    <div class="white-bg">
      <!-- navbar ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->
      <nav class="navbar navbar-static-top"><div class="navbar-inner"><div class="container">

        <!-- button for narrow screen menu -->
        <button class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">menu</button>

        <!-- project title -->
        <a id="portal-logo" class="bccvllinks-home brand"><img src="images/bccvl_logo_beta.png" alt="Biodiversity &amp; Climate Change Virtual Lab"></a>

        <!-- container for content that will hide under menu when screen is narrow -->
        <div class="nav-collapse collapse">

          <!-- user menu -->
          <div id="user-menu" class="btn-group pull-right">
            <a class="btn dropdown-toggle fine" data-toggle="dropdown">
              <i class="icon-user"></i> <span class="bccvl-username">unknown user</span> <i class="caret"></i>
            </a>
            <ul class="dropdown-menu">
              <li><a class="bccvllinks-dashboard"><i class="icon-bell"></i>Dashboard</a></li>
              <li><a class="bccvllinks-adminaccess"><i class="icon-eye-open"></i> Admin access</a></li>
              <li class="divider"></li>
              <li><a class="bccvllinks-logoutuser"><i class="icon-eject"></i> Log out</a></li>
            </ul>
          </div>

          <!-- search field -->
          <form id="siteSearch" class="navbar-search pull-right" method="" autocomplete="on" action="" enctype="text/plain">
            <input type="text" name="siteSearchQuery" class="search-query" placeholder="Search"/>
          </form>

          <!-- main menu items -->
          <ul id="portal-globalnav" class="nav">
            <!-- <li               ><a class="bccvllinks-dashboard">Dashboard</a></li> -->
            <li               ><a class="bccvllinks-datasets">Datasets</a></li>
            <li class="active"><a class="bccvllinks-experiments">Experiments</a></li>
            <li               ><a class="bccvllinks-knowledgebase">Knowledge Base</a></li>
          </ul>

        </div><!--/.nav-collapse -->

      </div></div></nav><!-- end of nav wrapper -->

      <!-- content ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->
      <!-- container for main content -->
      <div class="container bccvl-main">

        <!-- breadcrumb trail ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->
        <div id="breadcrumbs" class="bccvl-breadcrumb row-fluid">
          <div class="span12">
            <ul class="breadcrumb">
              <li><a  class="bccvllinks-home icon-home"></a></li>
              <li class="separator icon-chevron-right"></li>
              <li><a class="bccvllinks-experiments">Experiments</a></li>
              <li class="separator icon-chevron-right"></li>
              <li>New Projection Experiment</li>
            </ul>
          </div>
        </div>

        <div class="alert" >
          <button type="button" class="close" data-dismiss="alert">&times;</button>
          <strong>Having trouble finding the appropriate dataset?</strong> We're working on more search, sort and filter functionality for this page. <a href="http://www.bccvl.org.au/blog/" target="_blank">Visit our blog</a> for more info.
        </div>

        <!-- notifications from plone ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->
        <section class="bccvl-flashmessages">
        </section>

        <!-- experiment setup form ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->

        <section class="bccvl-experimentdetails tabbable">
          <form class="bccvl-jqueryvalidate" id="experimentSetup" method="post" novalidate="novalidate" autocomplete="on" action="" enctype="text/plain">

            <h3>New Climate Change Experiment.</h3>
            <!-- the experiment form wizardy tabs, with the prev/next buttons -->

            <!-- tabs -->
            <div class="bccvl-wizardtabs">
              <div class="bccvl-wizardtabs-navbtns">
                <button class="btn bccvl-wizardtabs-prev" type="button"><i class="icon-chevron-left"></i> Previous</button>
                <button class="btn bccvl-wizardtabs-next" type="button">Next <i class="icon-chevron-right"></i></button>
              </div>
              <ul class="nav nav-tabs">
                <li class="active"><a href="#tab-meta" data-toggle="tab">Description</a></li>
                <li><a href="#tab-sdm" data-toggle="tab">Source Model</a></li>
                <li><a href="#tab-project" data-toggle="tab">Projection</a></li>
                <li><a href="#tab-review" data-toggle="tab">Run</a></li>
              </ul>
            </div>

            <!-- the contents of the wizard tab panes -->
            <div class="tab-content">

              <!-- page: meta  ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ -->
              <div class="tab-pane active" id="tab-meta">
                <fieldset class="tab">
                  <div class="row-fluid">
                    <div class="span6">
                      <h3>With the BCCVL, you can investigate the distribution of a species under potential future climatic conditions.</h3>
                      <p>Take the results of your Species Distribution Modelling experiment, and project that distribution for a certain year in the future with the climate information from one of several climate models. Select one of several greenhouse gas emissions scenarios to influence the climate models. Future climates are available from 2015 to 2085.</p>
                    </div>
                    <div class="span6">
                      <p class="bccvl-tab-description">
                        Give your experiment a title and description.
                      </p>
                      <div class="control-group">
                        <input type="text" name="expName" class="bccvl-expname input-block-level"
                               required="required" data-notblank="true" data-trigger="change keyup"
                               pattern="^[^_].*"
                               data-parsley-regex-message="Don't start your experiment name with an underscore."
                               data-parsley-required-message="Please supply a descriptive name for this experiment."
                               placeholder="Name for this experiment"
                               />
                      </div>
                      <div class="control-group">
                        <textarea name="expDescription" class="input-block-level bccvl-expdesc"
                                  data-notblank="true" data-trigger="change keyup"
                                  rows="6"
                                  placeholder="Description of experiment"
                                  ></textarea>
                      </div>
                    </div>
                  </div>
                </fieldset>
              </div>

              <!-- page: pick an SDM ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ -->
              <div class="tab-pane active" id="tab-sdm">
                <fieldset class="tab">
                  <div class="row-fluid">
                    <p class="span12 bccvl-tab-description">
                      Choose the species distribution model with which to project.
                    </p>
                  </div>

                  <!-- species distribution models -->
                  <div class="row-fluid bccvl-stretch-parent">
                    <div class="span12">
                      <div class="control-group">
                        <table class="table table-hover bccvl-sdmtable">
                        </table>
                      </div>
                    </div>
                  </div>
                </fieldset>
              </div>


              <!-- page: projection points  ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ -->

              <div class="tab-pane active bccvl-dimension-selection" id="tab-project">
                <fieldset class="tab">
                  <div class="row-fluid">
                    <p class="span12 bccvl-tab-description">
                      Select the year, emission scenario and climate model to use for the projection experiment.
                    </p>
                  </div>

                  <div class="alert" >
                    <button type="button" class="close" data-dismiss="alert">&times;</button>
                    <strong>Projection datasets will be based on resolution of source model, currently 30"(~1km) and 2.5'(5km).</strong><br/>
                    If no values are available, please re-run the SDM experiment at the alternative resolution.
                  </div>

                  <div class="row-fluid">
                    <p class="span12 bccvl-projections-counter">
                      <span class="bccvl-available-projections">0</span> projection dataset(s) found.
                    </p>
                    <p class="projection-error-message hidden">Please select at least one dataset.</p>
                  </div>

                  <!-- TODO: should have some example items in each of the select lists -->
                  <div class="row-fluid bccvl-dimensions">

                    <div class="span4 bccvl-dimension"><div class="control-group">

                      <!-- years table -->
                      <table class="table table-condensed table-hover bccvl-yearstable">
                        <thead>
                          <tr><th colspan="2">
                            Years
                          </th></tr>
                        </thead>
                        <tbody>
                          <tr class="warning">
                            <td colspan="2">
                              <p></p>
                            </td>
                          </tr>

                          <tr class="test-content">
                            <td class="bccvl-table-choose">
                              <input type="checkbox"
                                     id="id=form-widgets-years-0"
                                     name="form.widgets.years"
                                     value="&lt;value&gt;"
                                     checked="checked"
                                     data-parsley-mincheck="1"
                                     data-parsley-group="form.widgets.years"
                                     data-parsley-error-message="Please select at least 1 year."/>
                            </td>
                            <td class="bccvl-table-label">
                              <label for="form-widgets-years-0">
                                <h1>2015</h1>
                                <p>provenance and description</p>
                              </label>
                            </td>
                          </tr>
                        </tbody>
                      </table>
                    </div></div>


                    <div class="span4 bccvl-dimension"><div class="control-group">

                      <!-- emission scenarios table -->
                      <table class="table table-condensed table-hover bccvl-emissionscenariostable">
                        <thead>
                          <tr><th colspan="2">
                            Emission Scenarios
                          </th></tr>
                        </thead>
                        <tbody>
                        </tbody>
                      </table>
                    </div></div>

                    <div class="span4 bccvl-dimension"><div class="control-group">

                      <!-- climate models table -->
                      <table class="table table-condensed table-hover bccvl-climatemodelstable">
                        <thead>
                          <tr><th colspan="2">
                            Climate Models
                          </th></tr>
                        </thead>
                        <tbody>
                        </tbody>
                      </table>
                    </div></div>

                  </div>
                </fieldset>
              </div>

              <!-- page: review  ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ -->
              <div class="tab-pane active" id="tab-review">
                <fieldset class="tab">
                  <div class="row-fluid">
                    <p class="span12 ">
                      Review and run your experiment.
                    </p>
                  </div>

                  <div class="row-fluid">
                    <!-- show the current status -->
                    <div class="span12 bccvl-expstatus alert alert-block alert-info">
                      <button type="submit" class="btn btn-primary btn-large bccvllinks-experiment-start">start Experiment</button>
                    </div>
                  </div>
                </fieldset>
              </div><!-- end of status page -->

            </div>

          </form>
        </section>

      </div><!-- end of main content container -->
    </div>
    <!-- footer ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->
    <footer id="portal-footer" class="navbar navbar-fixed-bottom">
      <div class="container-fluid">
        <small>&hearts; and &copy; 2013 &nbsp;&middot;&nbsp; the BCCVL team</small>
      </div>
    </footer>

  </body>
</html>
