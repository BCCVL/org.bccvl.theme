<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8"/>
    <title>BCCVL New Ensemble Analysis</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>

    <link href="lib/bootstrap/css/bootstrap.css" rel="stylesheet"/>
    <link href="lib/bootstrap/css/bootstrap-responsive.css" rel="stylesheet"/>
    <link href="lib/select2/select2.css" rel="stylesheet"/>
    <link href="css/general.css" rel="stylesheet"/>
    <!--[if lt IE 9]>
        <script src="lib/html5shiv/html5shiv.js"></script>
    <![endif]-->

    <!-- include portal_url to simplify path referencing -->
    <script src="../plone_javascript_variables.js" type="text/javascript"></script>
    <script id="js-config" type="text/javascript">
      // this block needs to be replaced when served via plone
      window.bccvl || (window.bccvl = {});
      window.bccvl.config || (window.bccvl.config = {});
      window.bccvl.config.data_mover = {
          baseUrl: 'https://demo.bccvl.org.au/dv',
      };
      window.bccvl.config.visualiser = {
          baseUrl: '/_visualiser/',
      };

      local = window.location.protocol == 'file:';
      portal_url = document.URL.split('/').slice(0, -1).join('/');
    </script>
    <!-- this slightly less neat way of using require.js means we can use a common config across all pages -->
    <script src="lib/require/require.js" type="text/javascript"></script>
    <script src="js/common.js" type="text/javascript"></script>
    <!-- include main js -->
    <script type="text/javascript">
      require(['js/new-experiment-ensemble']);
    </script>

    <script id="google-analytics"></script>

  </head>

  <body>
    <div class="white-bg">
      <!-- navbar ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->
      <nav class="navbar navbar-static-top"><div class="navbar-inner"><div class="container">

        <!-- button for narrow screen menu -->
        <button class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">menu</button>

        <!-- project title -->
        <a id="portal-logo" class="bccvllinks-home brand"><img src="images/bccvl_logo_beta.png" alt="Biodiversity &amp; Climate Change Virtual Lab"></a>

        <!-- container for content that will hide under menu when screen is narrow -->
        <div class="nav-collapse collapse">

          <!-- user menu -->
          <div id="user-menu" class="btn-group pull-right">
            <a class="btn dropdown-toggle fine" data-toggle="dropdown">
              <i class="icon-user"></i> <span class="bccvl-username">unknown user</span> <i class="caret"></i>
            </a>
            <ul class="dropdown-menu">
              <li><a class="bccvllinks-dashboard"><i class="icon-bell"></i>Dashboard</a></li>
              <li><a class="bccvllinks-adminaccess"><i class="icon-eye-open"></i> Admin access</a></li>
              <li class="divider"></li>
              <li><a class="bccvllinks-logoutuser"><i class="icon-eject"></i> Log out</a></li>
            </ul>
          </div>

          <!-- search field -->
          <form id="siteSearch" class="navbar-search pull-right" method="" autocomplete="on" action="" enctype="text/plain">
            <input type="text" name="siteSearchQuery" class="search-query" placeholder="Search"/>
          </form>

          <!-- main menu items -->
          <ul id="portal-globalnav" class="nav">
            <!-- <li               ><a class="bccvllinks-dashboard">Dashboard</a></li> -->
            <li               ><a class="bccvllinks-datasets">Datasets</a></li>
            <li class="active"><a class="bccvllinks-experiments">Experiments</a></li>
            <li               ><a class="bccvllinks-knowledgebase">Knowledge Base</a></li>
          </ul>

        </div><!--/.nav-collapse -->

      </div></div></nav><!-- end of nav wrapper -->


      <!-- content ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->
      <!-- container for main content -->
      <div class="container bccvl-main">

        <!-- breadcrumb trail ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->
        <div id="breadcrumbs" class="bccvl-breadcrumb row-fluid">
          <div class="span12">
            <ul class="breadcrumb">
              <li><a  class="bccvllinks-home icon-home"></a></li>
              <li class="separator icon-chevron-right"></li>
              <li><a class="bccvllinks-experiments">Experiments</a></li>
              <li class="separator icon-chevron-right"></li>
              <li>New Ensemble Analysis</li>
            </ul>
          </div>
        </div>

        <div class="alert" >
          <button type="button" class="close" data-dismiss="alert">&times;</button>
          <strong>Do you have a dataset you would like to see available in the BCCVL?</strong> - <a href="http://www.bccvl.org.au/contact-us/" target="_blank">Contact us</a> and weâ€™ll try and make it happen.
        </div>

        <div class="alert" >
          <button type="button" class="close" data-dismiss="alert">&times;</button>
          <strong>This experiment type is still under development.</strong>
        </div>

        <!-- notifications from plone ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->
        <section class="bccvl-flashmessages">
        </section>

        <!-- experiment setup form ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->

        <section class="bccvl-experimentdetails tabbable">
          <form class="bccvl-jqueryvalidate" id="experimentSetup" method="post" novalidate="novalidate" autocomplete="on" action="" enctype="text/plain">

            <h3>New Ensemble Analysis.</h3>
            <!-- the experiment form wizardy tabs, with the prev/next buttons -->

            <!-- tabs -->
            <div class="bccvl-wizardtabs">
              <div class="bccvl-wizardtabs-navbtns">
                <button class="btn bccvl-wizardtabs-prev" type="button"><i class="icon-chevron-left"></i> Previous</button>
                <button class="btn bccvl-wizardtabs-next" type="button">Next <i class="icon-chevron-right"></i></button>
              </div>
              <ul class="nav nav-tabs">
                <li class="active"><a href="#tab-meta" data-toggle="tab">Description</a></li>
                <li><a href="#tab-source-data" data-toggle="tab">Source Data</a></li>
                <li><a href="#tab-review" data-toggle="tab">Run</a></li>
              </ul>
            </div>

            <!-- the contents of the wizard tab panes -->
            <div class="tab-content">

              <!-- page: meta  ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ -->
              <div class="tab-pane active" id="tab-meta">
                <fieldset class="tab">
                  <div class="row-fluid">
                    <div class="span6">
                      <h3>To reduce the uncertainty of using the single-model, or single-emissions-scenario approach to investigating climate change impacts on biodiversity, you can run an ensemble experiment. </h3>
                      <p>You can run several different species distribution models for one species, when assessing the distribution under current climate. If looking at a climate change scenario, you can use the output of several different climate models with one species distribution model, or take the average of the climate model outputs and input this into several different species distribution models. This approach can also be used to assess a range of climate change emissions scenarios.</p>

                    </div>
                    <div class="span6">
                      <p class="bccvl-tab-description">
                        Give your experiment a title and description.
                      </p>
                      <div class="control-group">
                        <input type="text" name="expName" class="bccvl-expname input-block-level"
                               required="required" data-notblank="true" data-trigger="change keyup"
                               pattern="^[^_].*"
                               data-parsley-regex-message="Don't start your experiment name with an underscore."
                               data-parsley-required-message="Please supply a descriptive name for this experiment."
                               placeholder="Name for this experiment"
                               />
                      </div>
                      <div class="control-group">
                        <textarea name="expDescription" class="input-block-level bccvl-expdesc"
                                  data-notblank="true" data-trigger="change keyup"
                                  rows="6"
                                  placeholder="Description of experiment"
                                  ></textarea>
                      </div>
                    </div>
                  </div>
                </fieldset>
              </div>

              <!-- page: source data  ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ -->
              <div class="tab-pane active" id="tab-source-data">
                <fieldset class="tab">
                  <div class="row-fluid">
                    <p class="span12 bccvl-tab-description">
                      Select source data, following the steps below.
                    </p>
                  </div>

                  <div class="row-fluid">

                    <div class="span4">

                      <table class="table table-hover bccvl-inputdatasettypetable">
                        <thead>
                          <tr>
                            <th>1. Select Dataset Type</th>
                          </tr>
                        </thead>
                        <tbody>
                          <tr>
                            <td>
                              <div id="widget-experiment_type">
                              <select class="bccvl-inputdatasettype">
                                <option value="sdm" selected>SDM Experiment</option>
                                <option value="projection">Climate Change Experiment</option>
                                <option value="biodiverse">Biodiverse Experiment</option>
                              </select>
                              </div>
                            </td>
                          </tr>
                        </tbody>
                      </table>

                      <table class="table table-hover bccvl-sourceexperimenttable">
                        <thead>
                          <tr>
                            <th colspan="3">2. Select Source Experiment</th>
                          </tr>
                        </thead>
                        <tbody>
                          <div id="widget-datasets"></div>
                        </tbody>
                      </table>

                    </div>

                    <div class="span8">
                      <div class="control-group">
                        <table class="table table-hover bccvl-inputfiletable">
                          <thead>
                            <tr>
                              <th colspan="3">3. Select available files</th>
                            </tr>
                          </thead>
                          <tbody>
                          </tbody>
                        </table>

                        <div style="display: none">
                          <div id="bccvl-hiddeninputs" style="display: none">
                            <!-- Javascript actually creates the dataset inputs here  -->
                          </div>

                          <!-- Dynamically updated by javascript, to keep track of how many projections layers have been selected. -->
                          <input type="number" id="form.widgets.dataset.count" name="form.widgets.dataset.count" value="0"
                                 data-parsley-min="1" data-parsley-error-message="Please select at least 1 map layer."/>
                        </div>
                      </div>
                    </div>
                  </div>
                </fieldset>
              </div>

              <!-- page: review  ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~ -->
              <div class="tab-pane active" id="tab-review">
                <fieldset class="tab">
                  <div class="row-fluid">
                    <p class="span12 bccvl-tab-description">
                      Review and run your experiment.
                    </p>
                  </div>

                  <div class="row-fluid">
                    <!-- show the current status -->
                    <div class="span12 bccvl-expstatus">
                      <div class="loader" style="display:none;"></div>
                      <button type="submit" class="btn btn-primary btn-large bccvllinks-experiment-start">start Experiment</button>
                    </div>
                  </div>
                </fieldset>
              </div><!-- end of status page -->

            </div>

          </form>
        </section>

      </div><!-- end of main content container -->
    </div>

    <!-- footer ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->
    <footer id="portal-footer" class="navbar navbar-fixed-bottom">
      <div class="container-fluid">
        <small>&hearts; and &copy; 2013 &nbsp;&middot;&nbsp; the BCCVL team</small>
      </div>
    </footer>

  </body>
</html>
