<rules
    xmlns="http://namespaces.plone.org/diazo"
    xmlns:css="http://namespaces.plone.org/diazo/css"
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

    <!-- view the unthemed page when using 127.0.0.1 as host header -->
    <notheme if="$host='127.0.0.1'" />
    <!-- don't theme ajax calls (Plone overlays) -->
    <notheme if="$ajax_load" />

    <theme href="html/new-experiment-sdm.html" if-path="++add++org.bccvl.content.experiment" />

    <!-- for now, add some of the plone content ************************** -->
    <after css:theme-children="head" css:content="head link" />

    <!-- inject manifest js config              ************************** -->
    <after css:theme-children="#js-config">
        window.bccvl || (window.bccvl = {});
        window.bccvl.config || (window.bccvl.config = {});
        window.bccvl.config.visualiser = {
            baseUrl: '<xsl:value-of select="$visualiser_base_url" />',
        };
    </after>


    <after css:theme="nav">
        <div id="visual-portal-wrapper" style="margin:30px; padding-left:30px; border:10px solid #fcc; -webkit-transform:rotate(1deg);">
            <xsl:copy-of css:select="#portal-top" />
            <div style="clear: both"></div>
        </div>
    </after>


</rules>
